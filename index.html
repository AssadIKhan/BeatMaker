
<!DOCTYPE html>
<html>
<head>
  <title>Javascript Beat Pad - Just Use Your Keyboard</title>
  <script type="text/javascript" src="assets/js/lib/paper-full.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/1.1.29/howler.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Raleway"  rel="stylesheet" />
  <script type="text/paperscript" canvas="myCanvas">

    var keyData = {
        q: {
        sound: new Howl({
          urls: ['sounds/bubbles.mp3']
        }),
        color: '#1abc9c'
      },
      w: {
        sound: new Howl({
          urls: ['sounds/clay.mp3']
        }),
        color: '#2ecc71'
      },
      e: {
        sound: new Howl({
          urls: ['sounds/confetti.mp3']
        }),
        color: '#3498db'
      },
      r: {
        sound: new Howl({
          urls: ['sounds/corona.mp3']
        }),
        color: '#9b59b6'
      },
        t: {
        sound: new Howl({
          urls: ['sounds/dotted-spiral.mp3']
        }),
        color: '#34495e'
      },
      y: {
        sound: new Howl({
          urls: ['sounds/flash-1.mp3']
        }),
        color: '#16a085'
      },
      u: {
        sound: new Howl({
          urls: ['sounds/flash-2.mp3']
        }),
        color: '#27ae60'
      },
      i: {
        sound: new Howl({
          urls: ['sounds/flash-3.mp3']
        }),
        color: '#2980b9'
      },
      o: {
        sound: new Howl({
          urls: ['sounds/glimmer.mp3']
        }),
        color: '#8e44ad'
      },
      p: {
        sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: '#2c3e50'
      },
      a: {
        sound: new Howl({
          urls: ['sounds/pinwheel.mp3']
        }),
        color: '#f1c40f'
      },
      s: {
        sound: new Howl({
          urls: ['sounds/piston-1.mp3']
        }),
        color: '#e67e22'
      },
        d: {
        sound: new Howl({
          urls: ['sounds/piston-2.mp3']
        }),
        color: '#e74c3c'
      },
      f: {
        sound: new Howl({
          urls: ['sounds/prism-1.mp3']
        }),
        color: '#95a5a6'
      },
      g: {
        sound: new Howl({
          urls: ['sounds/prism-2.mp3']
        }),
        color: '#f39c12'
      },
      h: {
        sound: new Howl({
          urls: ['sounds/prism-3.mp3']
        }),
        color: '#d35400'
      },
      j: {
        sound: new Howl({
          urls: ['sounds/splits.mp3']
        }),
        color: '#1abc9c'
      },
      k: {
        sound: new Howl({
          urls: ['sounds/squiggle.mp3']
        }),
        color: '#2ecc71'
      },
      l: {
        sound: new Howl({
          urls: ['sounds/strike.mp3']
        }),
        color: '#3498db'
      },
      z: {
        sound: new Howl({
          urls: ['sounds/suspension.mp3']
        }),
        color: '#9b59b6'
      },
      x: {
        sound: new Howl({
          urls: ['sounds/timer.mp3']
        }),
        color: '#34495e'
      },
      c: {
        sound: new Howl({
          urls: ['sounds/ufo.mp3']
        }),
        color: '#16a085'
      },
      v: {
        sound: new Howl({
          urls: ['sounds/veil.mp3']
        }),
        color: '#27ae60'
      },
      b: {
        sound: new Howl({
          urls: ['sounds/wipe.mp3']
        }),
        color: '#2980b9'
      },
      n: {
        sound: new Howl({
          urls: ['sounds/zig-zag.mp3']
        }),
        color: '#8e44ad'
      },
      m: {
        sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: '#2c3e50'
      }
    }

    var dotArray = [];

    function onKeyDown(event) {
      // When a key is pressed, set the content of the text item
      if(keyData[event.key]){
        var maxPoint = new Point(view.size.width,view.size.height);
        var randomPoint = Point.random();
        var point = maxPoint * randomPoint;
        var newCircle = new Path.Circle(point,300)
        newCircle.fillColor = keyData[event.key].color;
        dotArray.push(newCircle);
        keyData[event.key].sound.play();
      }
      else {
        console.log("Nothing to see here....");
      }
    }
    dotArray.pop();

    function onFrame(event){
      for(var i = 0; i < dotArray.length;i++){
        dotArray[i].fillColor.hue += 1;
        dotArray[i].scale(.9);
      }
    }
</script>
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="assets/css/beatmaker.css">
</head>
<body>
  <header>

<img src="./img/beatmake.png" alt="Beat Maker" width="200"  style=" margin:0 auto;">
    <p><h1><font style="color: blueviolet;">B</font>
    <font style="color: rgb(220, 43, 226);">e</font>
    <font style="color: rgb(226, 43, 98);">a</font>
    <font style="color: rgb(14, 190, 243);">t</font>&nbsp;&nbsp;
    <font style="color: rgb(43, 101, 226);">M</font>
    <font style="color: rgb(43, 226, 125);">a</font>
    <font style="color: rgb(223, 226, 43);">k</font>
    <font style="color: rgb(226, 147, 43);">e</font>
    <font style="color: rgb(226, 101, 43);">r</font></h1></p>
    <p>
      Press any Key to interact with me
    </p>
   <!-- Structure for keys -->
   <div class="keys" style=" margin-top:35px;">
    <div data-key="81" class="key">
        <kbd>Q</kbd>
        <span>Bubble</span>
    </div>
    <div data-key="87" class="key">
        <kbd>W</kbd>
        <span>Clay</span>
    </div>
    <div data-key="69" class="key">
        <kbd>E</kbd>
        <span>Confetti</span>
    </div>
    <div data-key="82" class="key">
        <kbd>R</kbd>
        <span>Corona</span>
    </div>
    <div data-key="84" class="key">
        <kbd>T</kbd>
        <span>Dotted-Spiral</span>
    </div>
    <div data-key="89" class="key">
        <kbd>Y</kbd>
        <span>Flash-1</span>
    </div>
    <div data-key="85" class="key">
        <kbd>U</kbd>
        <span>Flash-2</span>
    </div>
    <div data-key="73" class="key">
        <kbd>I</kbd>
        <span>Flash-3</span>
    </div>
    <div data-key="79" class="key">
        <kbd>O</kbd>
        <span>Glimmer</span>
    </div>
    <div data-key="80" class="key">
        <kbd>P</kbd>
        <span>Moon</span>
    </div>
</div>
<div class="keys" style=" min-width: 75%; margin: bottom 0;">
    <div data-key="65" class="key">
        <kbd>A</kbd>
        <span>Pinwheel</span>
    </div>
    <div data-key="83" class="key">
        <kbd>S</kbd>
        <span>Piston-1</span>
    </div>
    <div data-key="82" class="key">
        <kbd>D</kbd>
        <span>Piston-2</span>
    </div>
    <div data-key="89" class="key">
        <kbd>F</kbd>
        <span>Prism-1</span>
    </div>
    <div data-key="79" class="key">
        <kbd>G</kbd>
        <span>Prism-2</span>
    </div>
    <div data-key="80" class="key">
        <kbd>H</kbd>
        <span>Prism-3</span>
    </div>
    <div data-key="65" class="key">
        <kbd>J</kbd>
        <span>Splits</span>
    </div>
    <div data-key="75" class="key">
        <kbd>K</kbd>
        <span>Squiggle</span>
    </div>
    <div data-key="76" class="key">
        <kbd>L</kbd>
        <span>Strike</span>
    </div>
</div>
<div class="keys" style=" min-width: 60%; margin: bottom 0;">
    <div data-key="90" class="key">
        <kbd>Z</kbd>
        <span>Suspension</span>
    </div>
    <div data-key="88" class="key">
        <kbd>X</kbd>
        <span>Timer</span>
    </div>
    <div data-key="56" class="key">
        <kbd>C</kbd>
        <span>Ufo</span>
    </div>
    <div data-key="87" class="key">
        <kbd>V</kbd>
        <span>Veil</span>
    </div>
    <div data-key="85" class="key">
        <kbd>B</kbd>
        <span>Wipe</span>
    </div>
    <div data-key="78" class="key">
        <kbd>N</kbd>
        <span>Zig-Zag</span>
    </div>
    <div data-key="84" class="key">
        <kbd>M</kbd>
        <span>Percu</span>
    </div>
</div>
<div class="rights flex-row">
  <h4 class="text-gray">
      Copyright ©2021 All rights reserved | Made by
      <a style=" color:aliceblue;text-decoration: none;" href="https://github.com/AssadIKhan" target="_black">AssadIKhan
          With ❤️</a>
  </h4>
</div>
</header>
<audio data-key="81" src="./sounds/bubbles.mp3"></audio>
<audio data-key="87" src="./sounds/clay.mp3"></audio>
<audio data-key="69" src="./sounds/confetti.mp3"></audio>
<audio data-key="82" src="./sounds/corona.mp3"></audio>
<audio data-key="84" src="./sounds/dotted-spiral.mp3"></audio>
<audio data-key="89" src="./sounds/flash-1.mp3"></audio>
<audio data-key="85" src="./sounds/flash-2.mp3"></audio>
<audio data-key="73" src="./sounds/flash-3.mp3"></audio>
<audio data-key="79" src="./sounds/glimmer.mp3"></audio>
<audio data-key="80" src="./sounds/moon.mp3"></audio>

<audio data-key="65" src="./sounds/pinwheel.mp3"></audio>
<audio data-key="83" src="./sounds/piston-1.mp3"></audio>
<audio data-key="82" src="./sounds/piston-2.mp3"></audio>
<audio data-key="89" src="./sounds/prism-1.mp3"></audio>
<audio data-key="79" src="./sounds/prism-2.mp3"></audio>
<audio data-key="80" src="./sounds/prism-3.mp3"></audio>
<audio data-key="81" src="./sounds/splits.mp3"></audio>
<audio data-key="75" src="./sounds/squiggle.mp3"></audio>
<audio data-key="83" src="./sounds/strike.mp3"></audio>

<audio data-key="90" src="./sounds/suspension.mp3"></audio>
<audio data-key="88" src="./sounds/timer.mp3"></audio>
<audio data-key="86" src="./sounds/ufo.mp3"></audio>
<audio data-key="87" src="./sounds/veil.mp3"></audio>
<audio data-key="85" src="./sounds/wipe.mp3"></audio>
<audio data-key="78" src="./sounds/zig-zag.mp3"></audio>
<audio data-key="84" src="./sounds/Percussion-2.wav"></audio>

  <canvas id="myCanvas" resize></canvas>
  
  <script>
      const playSound = function (e) {
    //target the div element according to the keycode
    const key = document.querySelector(`.key[data-key="${e.keyCode}"]`)
    //check if the key is null
    //we use truthy falsy nature of js
    if (!key) return

    //now select the audio 
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`)
    //set the current time to zero to rewind everytime a key is down
    audio.currentTime = 0
    //play the audio
    audio.play()

    //add the playing class for effect
    key.classList.add('playing')
}

window.addEventListener('keydown', playSound)

//remove the classlist from every .key class
const removeFunc = function (e) {
    const keys = [...document.querySelectorAll('.key')]
    keys.forEach((key) => {
        key.classList.remove('playing')
    })

}
//when should we remove? just when the transitionend happend
document.addEventListener('transitionend', removeFunc)
  </script>
</body>
</html>
